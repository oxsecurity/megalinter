descriptor_id: XML
descriptor_type: format
descriptor_flavors:
  - all_flavors # Any project can contain XML
  - ci_light
  - cupcake
file_extensions:
  - ".xml"
  - ".xsd"
linters:
  # XML LINT
  - class: XmlLintLinter
    linter_name: xmllint
    linter_text: |
      To apply file formatting you must set `XML_XMLLINT_CLI_LINT_MODE: file` and `XML_XMLLINT_AUTOFORMAT: true`.
    variables:
      - name: XML_XMLLINT_AUTOFORMAT
        default_value: "false"
        description: If set to `true`, it will reformat and reindent the output
      - name: XML_XMLLINT_INDENT
        default_value: "  "
        description: The number of indentation spaces when `XML_XMLLINT_AUTOFORMAT` is `true`
    linter_url: https://gitlab.gnome.org/GNOME/libxml2/-/wikis/home
    linter_rules_configuration_url: https://gnome.pages.gitlab.gnome.org/libxml2/xmllint.html
    version_extract_regex: "(?<=libxml version )\\d+(\\d+)+"
    cli_lint_mode: list_of_files
    cli_lint_fix_arg_name: "--format"
    cli_help_arg_name: "--help"
    help_command_return_code: 1
    examples:
      - "xmllint myXMLfile.xml"
      - "xmllint myXSDfile.xsd"
      - "xmllint --format myXMLfile.xml --output myXMLfile.xml"
    install:
      apk:
        - libc-dev=${APK_LIBC_DEV_VERSION}
        - libxml2-dev=${APK_LIBXML2_DEV_VERSION}
        - libxml2-utils=${APK_LIBXML2_UTILS_VERSION}
        - libgcc=${APK_LIBGCC_VERSION}
      dockerfile:
        - |-
          # renovate: datasource=repology depName=alpine_3_21/libc-dev
          ARG APK_LIBC_DEV_VERSION=0.7.2-r5
        - |-
          # renovate: datasource=repology depName=alpine_3_21/libgcc
          ARG APK_LIBGCC_VERSION=14.2.0-r4
        - |-
          # renovate: datasource=repology depName=alpine_3_21/libxml2-dev
          ARG APK_LIBXML2_DEV_VERSION=2.13.4-r3
        - |-
          # renovate: datasource=repology depName=alpine_3_21/libxml2-utils
          ARG APK_LIBXML2_UTILS_VERSION=2.13.4-r3
