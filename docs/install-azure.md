---
title: Install MegaLinter on Azure Pipelines
description: Manual instructions to setup MegaLinter as an Azure Pipelines job
---
<!-- markdownlint-disable MD013 -->
<!-- @generated by .automation/build.py, please don't update manually -->
<!-- install-azure-section-start -->

# Azure Pipelines

Use the following Azure Pipelines [YAML template](https://docs.microsoft.com/en-us/azure/devops/pipelines/yaml-schema)

You can configure a [build validation](https://learn.microsoft.com/en-us/azure/devops/repos/git/branch-policies?view=azure-devops&tabs=browser#build-validation) branch policy against a single repository or across all repositories. If you configure across all repositories then your pipeline is stored in a central repository.

## Single Repository

Add the following to an `azure-pipelines.yaml` file within your code repository:

```yaml
# Run MegaLinter to detect linting and security issues
trigger:
  - main

pool:
  vmImage: ubuntu-latest

variables:
  # All available variables are described in documentation
  # https://megalinter.io/latest/config-file/
  DEFAULT_WORKSPACE: $(System.DefaultWorkingDirectory)
  
  # Disable LLM Advisor for bot PRs (dependabot, renovate, etc.)
  # Note: Azure Pipelines has limited access to PR author info, this is a basic check
  LLM_ADVISOR_ENABLED: >-
    ${{ not(or(
      contains(variables['Build.SourceBranch'], 'dependabot'),
      contains(variables['Build.SourceBranch'], 'renovate'),
      contains(variables['System.PullRequest.SourceBranch'], 'dependabot'),
      contains(variables['System.PullRequest.SourceBranch'], 'renovate'),
      startsWith(variables['Build.RequestedFor'], 'dependabot'),
      startsWith(variables['Build.RequestedFor'], 'renovate')
    )) }}

steps:
  # Checkout repo
  - checkout: self

  # Pull MegaLinter docker image
  - script: docker pull oxsecurity/megalinter:v8
    displayName: Pull MegaLinter

  # Run MegaLinter
  - script: |
      docker run -v $(System.DefaultWorkingDirectory):/tmp/lint \
        --env-file <(env | grep -e SYSTEM_ -e BUILD_ -e TF_ -e AGENT_) \
        -e SYSTEM_ACCESSTOKEN=$(System.AccessToken) \
        -e GIT_AUTHORIZATION_BEARER=$(System.AccessToken) \
        -e DEFAULT_WORKSPACE=/tmp/lint \
        -e LLM_ADVISOR_ENABLED=$(LLM_ADVISOR_ENABLED) \
        oxsecurity/megalinter:v8
    displayName: Run MegaLinter

  # Upload MegaLinter reports
  - task: PublishPipelineArtifact@1
    condition: succeededOrFailed()
    displayName: Upload MegaLinter reports
    inputs:
      targetPath: "$(System.DefaultWorkingDirectory)/megalinter-reports/"
      artifactName: MegaLinterReport
```

## Central Repository

Add the following to an `azure-pipelines.yaml` file within a separate repository e.g. 'MegaLinter' repository:

```yaml
# Run MegaLinter to detect linting and security issues

trigger: none

pool:
  vmImage: ubuntu-latest

variables:
  repoName: $[ replace(split(variables['System.PullRequest.SourceRepositoryURI'], '/')[6], '%20', ' ') ]
  
  # Disable LLM Advisor for bot PRs (dependabot, renovate, etc.)
  # Note: Azure Pipelines has limited access to PR author info, this is a basic check
  LLM_ADVISOR_ENABLED: >-
    ${{ not(or(
      contains(variables['Build.SourceBranch'], 'dependabot'),
      contains(variables['Build.SourceBranch'], 'renovate'),
      contains(variables['System.PullRequest.SourceBranch'], 'dependabot'),
      contains(variables['System.PullRequest.SourceBranch'], 'renovate'),
      startsWith(variables['Build.RequestedFor'], 'dependabot'),
      startsWith(variables['Build.RequestedFor'], 'renovate')
    )) }}

steps:
  # Checkout triggering repo
  - checkout: git://$(System.TeamProject)/$(repoName)@$(System.PullRequest.SourceBranch)
    displayName: Checkout Triggering Repository

  # Pull MegaLinter docker image
  - script: docker pull oxsecurity/megalinter:v8
    displayName: Pull MegaLinter

  # Run MegaLinter
  - script: |
      docker run -v $(System.DefaultWorkingDirectory):/tmp/lint \
        --env-file <(env | grep -e SYSTEM_ -e BUILD_ -e TF_ -e AGENT_) \
        -e SYSTEM_ACCESSTOKEN=$(System.AccessToken) \
        -e GIT_AUTHORIZATION_BEARER=$(System.AccessToken) \
        -e DEFAULT_WORKSPACE=/tmp/lint \
        -e LLM_ADVISOR_ENABLED=$(LLM_ADVISOR_ENABLED) \
        oxsecurity/megalinter:v8
    displayName: Run MegaLinter

  # Upload MegaLinter reports
  - task: PublishPipelineArtifact@1
    condition: succeededOrFailed()
    displayName: MegaLinter Report
    inputs:
      targetPath: $(System.DefaultWorkingDirectory)/megalinter-reports/
      artifactName: MegaLinterReport
```

## Pull Request Comments

To benefit from Pull Request comments, please follow [configuration instructions](reporters/AzureCommentReporter.md)

## Detailed Tutorial

You can also follow this [detailed tutorial](https://github.com/DonKoning/megaLinter) by [DonKoning](https://github.com/DonKoning)


<!-- install-azure-section-end -->
